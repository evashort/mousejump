using Microsoft.UI.Xaml;
using Microsoft.UI.Xaml.Controls;
using System.Collections.ObjectModel;

// To learn more about WinUI, the WinUI project structure,
// and more about our project templates, see: http://aka.ms/winui-project-info.

namespace MouseJumpSettings.Views
{
    public sealed partial class Labels : Page
    {
        // https://docs.microsoft.com/en-us/windows/apps/design/controls/tree-view#tree-view-using-data-binding
        private ObservableCollection<Item> DataSource = new ObservableCollection<Item>();
        private int Priority { get; set; }
        private double Weight { get; set; }

        public Labels()
        {
            this.InitializeComponent();
            DataSource = GetData();
        }

        private ObservableCollection<Item> GetData()
        {
            return new ObservableCollection<Item>
            {
                new Item
                {
                    Name = "main",
                    Operation = Operation.Merge,
                    Children = new ObservableCollection<Item>
                    {
                        new Item
                        {
                            Name = "letters",
                            Operation = Operation.Literal,
                            Weight = 1,
                        },
                        new Item
                        {
                            HasSeparator = true,
                            Name = "numbers",
                            Operation = Operation.Difference,
                            Weight = 2,
                        },
                    },
                },
                new Item
                {
                    Name = "unused",
                    Operation = Operation.Join,
                },
                new Item
                {
                    Name = "New sequence",
                    Operation = Operation.New,
                },
            };
        }
    }

    public enum Operation
    {
        Literal,
        Merge,
        Join,
        Difference,
        New,
    }

    public class Item
    {
        public string Name { get; set; }
        public Operation Operation { get; set; }
        public string PathData
        {
            get
            {
                // https://docs.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font
                // Edit > Select All
                // Path > Object to Path
                // order is important here because Object to Path can convert objects to stroked paths
                // Path > Stroke to Path
                // Path > Union
                // https://github.com/Klowner/inkscape-applytransforms
                // Extensions > Modify Path > Apply Transform
                return Operation switch
                {
                    Operation.Literal => "M 11.5,1 a 0.5,0.5 0 0 1 0,1 H 0.5 a 0.5,0.5 0 0 1 0,-1 Z M 15.5,7 a 0.5,0.5 0 0 1 0,1 H 0.5 a 0.5,0.5 0 0 1 0,-1 Z M 10.5,13 a 0.5,0.5 0 0 1 0,1 H 0.5 a 0.5,0.5 0 0 1 0,-1 Z",
                    Operation.Merge => "M 6.8300781,6.9726562 A 0.5,0.5 0 0 0 6.1640625,7.2089844 0.5,0.5 0 0 0 6.4003906,7.875 c 2.8524223,1.3584083 5.9425534,2.191143 8.9921874,2.863281 A 0.5,0.5 0 0 0 15.988281,10.357422 0.5,0.5 0 0 0 15.607422,9.7617188 C 12.58879,9.096413 9.5720712,8.2784749 6.8300781,6.9726562 Z M 8.5703125,3.0546875 A 0.5,0.5 0 0 0 8.203125,3.1660156 C 5.9215592,5.0281273 2.5694784,6.8976627 0.31640625,7.7851562 a 0.5,0.5 0 0 0 -0.28125,0.6484376 0.5,0.5 0 0 0 0.6484375,0.28125 C 3.0640967,7.7771547 6.4390072,5.8957202 8.8359375,3.9394531 A 0.5,0.5 0 0 0 8.90625,3.2363281 0.5,0.5 0 0 0 8.5703125,3.0546875 Z M 8.2128906,0.00390625 A 0.5,0.5 0 0 0 7.8457031,0.109375 0.5,0.5 0 0 0 7.7695312,0.8125 c 1.9245137,2.3947713 4.9087748,4.7581182 7.5703128,5.6601562 a 0.5,0.5 0 0 0 0.632812,-0.3125 0.5,0.5 0 0 0 -0.3125,-0.6328125 C 13.296987,4.7264277 10.353829,2.4335553 8.5488281,0.1875 A 0.5,0.5 0 0 0 8.2128906,0.00390625 Z M 6,14 A 0.5,0.5 0 0 0 5.5,14.5 0.5,0.5 0 0 0 6,15 h 9.5 A 0.5,0.5 0 0 0 16,14.5 0.5,0.5 0 0 0 15.5,14 Z M 9.7265625,10.738281 C 6.700471,11.242022 3.2029003,11.783929 0.4375,12.128906 A 0.5,0.5 0 0 0 0.00390625,12.6875 0.5,0.5 0 0 0 0.5625,13.121094 c 2.7900142,-0.348048 6.2933615,-0.8913 9.328125,-1.396485 a 0.5,0.5 0 0 0 0.412109,-0.574218 0.5,0.5 0 0 0 -0.5761715,-0.41211 z",
                    Operation.Join => "M 1.50016,0.999938 C 0.677662,0.999938 0,1.6776 0,2.5001 c 0,0.82251 0.677662,1.49965 1.50016,1.49965 0.64755,0 1.20489,-0.41992 1.41284,-0.99994 h 8.8175 C 11.3799,3.2535 11.0421,3.54416 10.7166,3.86126 9.76036,4.79288 8.88234,5.96264 8.01811,7.15098 7.19534,6.02058 6.35746,4.90761 5.45031,3.99975 H 3.95479 C 4.1739,4.17344 4.39223,4.36597 4.61108,4.57801 5.55532,5.49287 6.47618,6.72676 7.40006,7.99898 6.47614,9.27128 5.55537,10.5071 4.61108,11.422 4.00438,12.0099 3.39976,12.4578 2.78071,12.7238 2.51621,12.2912 2.03952,11.9998 1.50016,11.9998 0.677662,11.9998 0,12.6774 0,13.4999 c 0,0.8225 0.677662,1.5002 1.50016,1.5002 0.74811,0 1.37612,-0.5608 1.48363,-1.2811 C 3.82559,13.3994 4.596,12.8314 5.30871,12.1408 6.42049,11.0637 7.42575,9.66821 8.4217,8.29302 9.41765,6.91784 10.4043,5.56139 11.4158,4.57594 c 0.5998,-0.58428 1.1967,-1.02871 1.8061,-1.29449 0.2651,0.42968 0.7407,0.7183 1.278,0.7183 C 15.3224,3.99975 16,3.32261 16,2.5001 16,1.6776 15.3224,0.999938 14.4999,0.999938 c -0.6476,0 -1.2049,0.419922 -1.4129,0.999942 H 2.913 C 2.70505,1.41986 2.14771,0.999938 1.50016,0.999938 Z m 0,0.999942 c 0.28207,0 0.49972,0.21816 0.49972,0.50022 0,0.28207 -0.21765,0.49971 -0.49972,0.49971 -0.28206,0 -0.500222,-0.21764 -0.500222,-0.49971 0,-0.28206 0.218162,-0.50022 0.500222,-0.50022 z m 12.99974,0 c 0.282,0 0.5002,0.21816 0.5002,0.50022 0,0.28207 -0.2182,0.49971 -0.5002,0.49971 -0.2821,0 -0.4997,-0.21764 -0.4997,-0.49971 0,-0.28206 0.2176,-0.50022 0.4997,-0.50022 z M 9.25575,8.84751 C 9.248,8.85822 9.24026,8.86832 9.2325,8.87903 9.03701,9.14896 8.83868,9.42135 8.63977,9.69345 c 0.66604,0.88825 1.34875,1.73595 2.07683,2.44535 0.3252,0.3167 0.6627,0.6078 1.0129,0.8614 H 5.85442 c -0.38928,0.3646 -0.80682,0.7058 -1.25419,1 H 13.087 c 0.208,0.58 0.7653,0.9999 1.4129,0.9999 0.8225,0 1.5001,-0.6777 1.5001,-1.5002 0,-0.8225 -0.6776,-1.5001 -1.5001,-1.5001 -0.5374,0 -1.0129,0.2894 -1.278,0.7193 C 12.6125,12.4532 12.0156,12.0079 11.4158,11.4236 10.6872,10.7137 9.97134,9.81054 9.25575,8.84751 Z M 1.50016,13.0002 c 0.28207,0 0.49972,0.2177 0.49972,0.4997 0,0.2821 -0.21765,0.5003 -0.49972,0.5003 -0.28206,0 -0.500222,-0.2182 -0.500222,-0.5003 0,-0.282 0.218162,-0.4997 0.500222,-0.4997 z m 12.99974,0 c 0.282,0 0.5002,0.2177 0.5002,0.4997 0,0.2821 -0.2182,0.5003 -0.5002,0.5003 -0.2821,0 -0.4997,-0.2182 -0.4997,-0.5003 0,-0.282 0.2176,-0.4997 0.4997,-0.4997 z",
                    Operation.Difference => "m 10.007812,9.3203125 c 5.9e-4,-0.3151824 0.06104,-0.5524249 0.08594,-0.5761719 l 5.435546,-5.1835937 c 0.46002,-0.4387278 0.572276,-1.0848648 0.375,-1.6113282 C 15.707023,1.4227554 15.167931,1 14.500002,1 H 1.5 C 0.83207057,1 0.29297839,1.4227554 0.09570312,1.9492187 -0.10157214,2.4756821 0.01068223,3.1218191 0.47070313,3.5605469 L 5.90625,8.7441406 c 0.024899,0.023747 0.085346,0.2609895 0.085937,0.5761719 L 6,13.75 9.2207,15.914063 C 9.5533093,16.137976 10.000966,15.899002 10,15.498047 M 8.9960938,14.558594 7,13.216797 6.9921875,9.3183594 C 6.9915694,8.9892608 7.0370426,8.4423955 6.5957031,8.0214844 L 1.1601562,2.8378906 C 0.98965295,2.6752794 0.96841532,2.4717256 1.0332031,2.2988281 1.0979909,2.1259306 1.2169582,2 1.5,2 h 13.000002 c 0.283041,0 0.402009,0.1259306 0.466796,0.2988281 0.06479,0.1728975 0.04355,0.3764513 -0.126953,0.5390625 L 9.4042985,8.0214844 C 8.962959,8.4423955 9.0084322,8.9892608 9.0078116,9.3183594",
                    Operation.New => "M 7.49979,0.999938 C 7.22367,1.0001 6.99995,1.22405 7.00008,1.50016 V 7.00008 H 1.50016 C 1.22405,6.99995 1.0001,7.22367 0.999938,7.49979 0.999877,7.63248 1.05256,7.75975 1.14638,7.85357 1.24021,7.9474 1.36748,8.00008 1.50016,8.00002 h 5.49992 v 5.49988 c -1.3e-4,0.2762 0.22359,0.5001 0.49971,0.5003 0.13269,0 0.25996,-0.0527 0.35378,-0.1465 0.09383,-0.0938 0.14651,-0.2211 0.14645,-0.3538 V 8.00002 h 5.49988 c 0.1327,6e-5 0.26,-0.05262 0.3538,-0.14645 C 13.9475,7.75975 14.0002,7.63248 14.0002,7.49979 14,7.22367 13.7761,6.99995 13.4999,7.00008 H 8.00002 V 1.50016 C 8.00008,1.36748 7.9474,1.24021 7.85357,1.14638 7.75975,1.05256 7.63248,0.999877 7.49979,0.999938 Z",
                    _ => "",
                };
            }
        }
        public double? Weight { get; set; }
        public bool Used { get; set; }
        public bool HasSeparator { get; set; }
        public string AltText {
            get
            {
                if (Weight != null)
                {
                    if (HasSeparator)
                    {
                        return $"{Name} {Weight}, priority 1";
                    }

                    return $"{Name} {Weight}";
                }
                else
                {
                    if (HasSeparator)
                    {
                        return $"{Name}, priority 1";
                    }

                    return Name;
                }
            }
        }
        public Visibility SeparatorVisibility {
            get { return HasSeparator ? Visibility.Visible : Visibility.Collapsed; }
        }
        public ObservableCollection<Item> Children { get; set; } = new ObservableCollection<Item>();

        public override string ToString()
        {
            return Name;
        }
    }
}
